services:
  db:                         #---# Указываем имя контейнера для сервиса db
    hostname: db              #---# Указываем имя хоста для сервиса db                      !!!
    container_name: db        #---# Указываем имя контейнера для сервиса db
    image: mongo              #---# Используем образ MongoDB для сервиса db
    volumes:                  #---# Монтируем локальную директорию './mongodb' 
      - './mongodb:/data/db'      #---# в контейнер по пути '/data/db'
    ports:                    #---# Пробрасываем порты для доступа к сервису db из внешней сети
      - "27017:27017"

  app:                        #---# сервиса app (будет использовать базу данных db)
    hostname: app
    container_name: app
    image: myapp
    depends_on:
      - db                    #---# Указываем, что сервис app зависит от сервиса db         !!!
    environment:
      DATABASE_HOST: db       #---# Использование имени хоста для подключения к базе данных !!!
